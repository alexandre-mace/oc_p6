{% extends 'base.html.twig' %}

{% block header %}

    <div class="header" style="background: url({{ asset(getTrickMainImage(trick)) }}) no-repeat center center fixed;background-size: cover;">
        <div class="overlay"></div>
        <div class="container h-100">
            <div class="row h-100">
                <div class="col d-flex flex-column">
                	{% for message in app.flashes('notice') %}
                        <div class="flash-notice alert alert-info">
                            {{ message }}
                        </div>
                    {% endfor %}
                    {% if is_granted('ROLE_USER') %}
	                	<div class="edit_delete d-flex justify-content-center my-3">
	                        <a href="{{ path('trick_update', {'slug': trick.slug}) }}">
	                            <i class="fas fa-edit fa-2x"></i>
	                        </a>
	                        {% if app.user is same as(trick.author) %}
	                        	<div class="mx-2"></div>
	                        	<a href="{{ path('trick_delete', {'slug': trick.slug}) }}">
	                            	<i class="fas fa-trash-alt fa-2x"></i>    
	                        	</a>
	                        {% endif %}
	                    </div>
                    {% endif %}

                    <div class="jumbotron my-auto">
                        <h1 class="display-4">{{ trick.name }}</h1>
                    </div>    

                    <a id="arrow-scroll-bottom" href="#trick">
                        <i class="fas fa-arrow-down fa-2x"></i>
                    </a>   
                    
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block body %}

	<div id="trick" class="row pt-5 trick">
        {% for image in trick.images %}
			<div class="col">
				<img class="showImg" src="{{ asset('uploads/images/' ~ image.name) }}">
			</div>
		{% endfor %}	
        {% for video in trick.videos %}
			<div class="col">
				<iframe class="showVideo" src="{{ video.url }}" frameborder="0" allowfullscreen></iframe>
			</div>
		{% endfor %}								
	</div>

	<div class="row">
		<div class="col">
			<p class="pt-5 pb-2">{{ trick.description|capitalize }}.</p>
		</div>
	</div>			

	<div class="row">
		<div class="col text-center">
			{% for category in trick.categories %}
                <button type="button" class="btn btn-outline-dark btn-sm">{{ category.name }}</button>
            {% endfor %}
		</div>
	</div>

    {% if is_granted('ROLE_USER') %}
		<hr>
			{{ include('comment/add.html.twig') }}
	{% endif %}

	{% for comment in trick.comments %}
		<hr>
		<div class="row">
			<div class="col-1">
				<div class="d-flex flex-column">
					<p>{{ comment.author.username }}</p>
				</div>
			</div>
			<div class="col-9">
				<div class="d-flex flex-column">
					<p>{{ comment.addedAt|date('Y-m-d H:i:s') }}</p>
					<p>{{ comment.content }}</p>
				</div>
			</div>
		</div>
	{% endfor %}

{% endblock %}